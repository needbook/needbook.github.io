<div class="character-details-container">
  <md-content>
    <md-list class="character-list" hide-xs>
      <!--ui-sref="app.book.character({bookID: bookId, charID: character.id})"-->
      <md-list-item ng-repeat="character in characters | orderBy:orderByName" ng-click="goToCharacter(character.id)"  ng-class="{'active': character.id === selectedCharacter.id}">
        <span ng-if="!character.picture().length">
          <img src="assets/img/avatars/character/male.svg" ng-show="character.gender() === 'male'" class="md-avatar" alt="{{character.name()}}"/>
          <img src="assets/img/avatars/character/female.svg" ng-show="character.gender() === 'female'" class="md-avatar" alt="{{character.name()}}"/>
          <img src="assets/img/avatars/character/unknown.svg" ng-show="character.gender() != 'female' && character.gender() != 'male'" class="md-avatar" alt="{{character.name()}}"/>
        </span>
        <img ng-src="{{character.picture()}}" ng-if="character.picture().length" class="md-avatar" alt="{{character.name()}}"/>
        <p>{{character.name()}}</p>
      </md-list-item>
    </md-list>
  </md-content>

  <character-details book-id="bookId" char-id=charId></character-details>
</div>

<md-fab-speed-dial id="my-speed-dial" class="md-scale" md-direction="up" md-open="fab.isOpen" ng-mouseenter="fab.isOpen=true" ng-mouseleave="fab.isOpen=false">
  <md-fab-trigger>
    <md-button aria-label="menu" class="md-fab md-accent">
      <md-tooltip md-direction="left">Open</md-tooltip>
      <ng-md-icon icon="menu" aria-label="{{'action.add' | i18next}}"></ng-md-icon>
    </md-button>
  </md-fab-trigger>
  <md-fab-actions ng-show="fab.isOpen">
    <div ng-repeat="fabAction in fabActions">
      <md-button aria-label="{{fabAction.name}}" class="md-fab md-raised md-mini" ng-click="fabActionClick($index)">
        <md-tooltip md-direction="left">
          {{fabAction.name}}
        </md-tooltip>
        <ng-md-icon icon="{{fabAction.icon}}" aria-label="{{fabAction.name}}"></ng-md-icon>
      </md-button>
    </div>
 </md-fab-actions>
</md-fab-speed-dial>

<!-- <div ng-controller="BookCharacterDetailCtrl">
  <div style="text-align:right;">
    <md-button ng-click="addTraitDialog();">Add trait</md-button>
    <md-button ng-click="addLinkDialog();">Add link</md-button>
    <md-button ng-click="addMoveDialog();">Add move</md-button>
    <md-button ng-click="addActionDialog();">Add action</md-button>
  </div>
  <timeline>
    <timeline-event ng-repeat="(location, events) in events | groupBy: 'calculated_begin_location'">

      <timeline-legend>
        <span ng-if="location != 'null'" class="md-primary">Location {{location}}</span>
        <span ng-if="location == 'null'" class="md-primary">Beginning</span>
      </timeline-legend>

      <timeline-badge class="normal">
        <i class="glyphicon"></i>
      </timeline-badge>

      <timeline-panel>
        <timeline-heading ng-if="events.length > 1">
          <h4>{{events.length}} events:</h4>
        </timeline-heading>
        <div class="list-item" ng-repeat="event in events">
          <div style="float:right"><ng-md-icon icon="remove" label="{{'action.remove' | i18next}}" ng-click="deleteEvent(event)" style="cursor:pointer;"></ng-md-icon></div>
          <div ng-if="event.type=='trait'"><strong>{{event.trait.names.en_US}}:</strong> {{event.values.en_US.join(', ')}}</div>
          <div ng-if="event.type=='move'">Moved from <strong><a href="#" ui-sref="app.book.place({ placeID: event.from.id })">{{event.from.indexedTraits().names[event.from.indexedTraits().names.length - 1].values.en_US[0]}}</a></strong> to <strong><a href="#" ui-sref="app.book.place({ placeID: event.to.id })">{{event.from.indexedTraits().names[event.from.indexedTraits().names.length - 1].values.en_US[0]}}</a></strong></div>
          <div ng-if="event.type=='link'">{{event.toSentence('en_US')}}</div>
          <div ng-if="event.type=='action'">{{event.toSentence('en_US')}}</div>
        </div>
      </timeline-panel>
    </timeline-event>
  </timeline>
</div> -->
