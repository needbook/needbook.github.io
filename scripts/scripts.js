"use strict";function Author(a){this.EntityType="Author",angular.extend(this,a)}function Book(a){this.EntityType="Book",angular.extend(this,a)}function Character(a){this.EntityType="Character",angular.extend(this,a)}function Client(a){this.EntityType="Client",angular.extend(this,a)}function Edition(a){this.EntityType="Edition",angular.extend(this,a)}function Library(a){this.EntityType="Library",angular.extend(this,a)}function Search(a){this.EntityType="Search",angular.extend(this,a)}function Serie(a){this.EntityType="Serie",angular.extend(this,a)}function User(a){this.EntityType="User",this.Books=[],this.booksLoaded=!1,angular.extend(this,a),this.Firstname&&this.Lastname?this.Fullname=this.Firstname+" "+this.Lastname:this.Fullname=this.Firstname||this.Lastname,this.loadBooks=function(a,b){var c=this;c.booksLoaded?b():a.ofUser({userID:c.id},function(a){c.Books=a,c.booksLoaded=!0,b()})},this.addBook=function(a){this.Books.push(a)}}angular.module("needbookApp",["ngAnimate","ngAria","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngMaterial","ngMdIcons","ui.router","md.data.table","app.ngResource","app.underscore","apiModels","authControllers","authorControllers","bookControllers","serieControllers"]).run(["$rootScope","$state","AUTH_EVENTS","AuthService",function(a,b){a.$on("$stateChangeError",function(){b.go("home.login")})}]);var needbookApp=angular.module("needbookApp");needbookApp.config(["$httpProvider",function(a){a.interceptors.push(["$injector",function(a){return a.get("AuthInterceptor")}])}]).factory("AuthInterceptor",["$rootScope","$q","AUTH_EVENTS",function(a,b,c){return{responseError:function(a){}}}]);var needbookApp=angular.module("needbookApp");needbookApp.constant("AUTH_EVENTS",{clientAuthSuccess:"auth:client-success",clientAuthFailed:"auth:client-failed",registrationSuccess:"auth:registration-success",registrationFailed:"auth:registration-failed",deletionSuccess:"auth:deletion-success",deletionFailed:"auth:deletion-failed",loginSuccess:"auth:login-success",loginFailed:"auth:login-failed",logoutSuccess:"auth:logout-success",sessionCreated:"auth:session-created",sessionDeleted:"auth:session-deleted",sessionTimeout:"auth:session-timeout",notAuthenticated:"auth:not-authenticated",notAuthorized:"auth:not-authorized"}).constant("USER_ROLES",{all:"*",admin:"admin",editor:"editor",guest:"guest"});var needbookApp=angular.module("needbookApp");needbookApp.controller("AppCtrl",["$log","$rootScope","$scope","$state","$mdToast","USER_ROLES","AUTH_EVENTS","AuthService","Session",function(a,b,c,d,e,f,g,h,i){b.pageTitle="Page Title",c.currentUser=null,c.userRoles=f,c.isAuthorized=h.isAuthorized,h.clientConnection(),c.logout=h.logout,c.$on(g.loginSuccess,function(){e.show(e.simple().position("bottom right").content("Login Success")),d.go("app.library.books")}),c.$on(g.loginFailed,function(){e.show(e.simple().position("bottom right").content("Login Failure"))}),c.$on(g.deletionSuccess,function(){e.show(e.simple().position("bottom right").content("Account Deleted"))}),c.$on(g.deletionFailure,function(){e.show(e.simple().position("bottom right").content("Account Deletion Failed"))}),c.$on(g.sessionCreated,function(){c.currentUser||(c.currentUser=i.loadState())}),c.$on(g.sessionDeleted,function(){c.currentUser=null,d.go("home.login")})}]);var needbookApp=angular.module("needbookApp");needbookApp.config(["$stateProvider","$urlRouterProvider","$httpProvider",function(a,b,c){c.defaults.withCredentials=!0,b.otherwise("/library/books"),a.state("home",{url:"/home",data:{requireLogin:!1},views:{header:{templateUrl:"components/home/toolbar/homeToolbarView.html",controller:"HomeToolbarCtrl"},content:{templateUrl:"components/home/homeView.html"}}}).state("home.login",{url:"/login",views:{"content@":{templateUrl:"components/auth/loginView.html",controller:"LoginCtrl"}}}).state("home.sign_up",{url:"/sign_up",views:{"content@":{templateUrl:"components/auth/signUpView.html",controller:"SignUpCtrl"}}}).state("app",{"abstract":!0,data:{requireLogin:!0},resolve:{auth:["AuthResolver",function(a){return a.resolve()}]},views:{header:{templateUrl:"shared/core/toolbar/simpleToolbarView.html",controller:"SimpleToolbarCtrl"},sidenav:{templateUrl:"shared/core/sidenav/sidenavView.html",controller:"SidenavCtrl"}}}).state("app.search",{url:"/search/:query",views:{"content@":{templateUrl:"components/search/searchResultView.html",controller:"SearchCtrl"}}}).state("app.book",{url:"/book/:bookID","abstract":!0,views:{"header@":{templateUrl:"shared/core/toolbar/simpleToolbarView.html",controller:"BookToolbarCtrl"}}}).state("app.book.details",{url:"",views:{"content@":{templateUrl:"components/book/bookDetailView.html",controller:"BookDetailCtrl"}}}).state("app.book.characters",{url:"/chars",views:{"content@":{templateUrl:"components/book/character/bookCharacterListView.html",controller:"BookCharacterListCtrl"}}}).state("app.book.character",{url:"/char/:charID",views:{"content@":{templateUrl:"components/book/character/bookCharacterDetailView.html",controller:"BookCharacterDetailCtrl"}}}).state("app.serie",{url:"/serie/:id",views:{"content@":{templateUrl:"components/serie/serieDetailView.html",controller:"SerieDetailCtrl"}}}).state("app.author",{url:"/author/:id",views:{"content@":{templateUrl:"components/author/authorDetailView.html",controller:"AuthorDetailCtrl"}}}).state("app.library",{url:"/library","abstract":!0,views:{"header@":{templateUrl:"shared/core/toolbar/simpleToolbarView.html",controller:"LibraryToolbarCtrl"}}}).state("app.library.books",{url:"/books",views:{"content@":{templateUrl:"components/book/bookListView.html",controller:"LibraryBookListCtrl"}}}).state("app.library.series",{url:"/series",views:{"content@":{templateUrl:"components/serie/serieListView.html",controller:"SerieListCtrl"}}}).state("app.library.authors",{url:"/authors",views:{"content@":{templateUrl:"components/author/authorListView.html",controller:"LibraryAuthorListCtrl"}}}).state("app.library.favorites",{url:"/favorites",views:{"content@":{templateUrl:"components/book/bookListView.html",controller:"FavoriteBooksCtrl"}}}).state("app.top_books",{url:"/top_books",views:{"content@":{templateUrl:"components/book/bookListView.html",controller:"TopBooksCtrl"}}}).state("app.discover",{url:"/discover",views:{"content@":{templateUrl:"components/book/bookListView.html",controller:"DiscoverCtrl"}}}).state("app.forum",{url:"/forum",views:{"content@":{templateUrl:"components/forum/forumView.html",controller:"ForumCtrl"}}}).state("app.settings",{url:"/settings",views:{"content@":{templateUrl:"components/settings/settingsView.html",controller:"SettingsCtrl"}}}).state("app.feedback",{url:"/feedback",views:{"content@":{templateUrl:"components/feedback/feedBackView.html",controller:"FeedbackCtrl"}}})}]),angular.module("app.ngResource",["ngResource","ngCookies"]).factory("Resource",["$resource","$cookies",function(a,b){return function(b,c,d){var e=function(a){return angular.forEach(arguments,function(b){b!==a&&angular.forEach(b,function(b,c){a[c]&&a[c].constructor&&a[c].constructor===Object?e(a[c],b):a[c]=b})}),a};delete c.model;var f={post:{method:"POST"},patch:{method:"PATCH"},create:{method:"POST"},update:{method:"PUT",isArray:!1},query:{isArray:!0}};d=e({},f,d),c=angular.extend({id:"@id"},c);var g=a(b,c,d);return g.prototype.$save=function(){return this.id?this.$update():this.$create()},g}}]);var needbookApp=angular.module("needbookApp");needbookApp.factory("config",[function(){var a="production",b={production:{apiUrl:"http://needbook.io:1337",clientName:"Admin",clientKey:"Ls5Peq5sfZcJHhkv54dfsdLg35HVfdff977fHF2S4354ZhkgyklMd5",log:!0},development:{apiUrl:"http://localhost:1337",clientName:"admin",clientKey:"admin",log:!0}};return b[a]}]);var needbookApp=angular.module("needbookApp");needbookApp.config(["$mdThemingProvider",function(a){a.theme("default").primaryPalette("teal").accentPalette("amber").warnPalette("red").backgroundPalette("grey")}]);var underscore=angular.module("app.underscore",[]);underscore.factory("_",["$window",function(a){return a._}]),angular.module("apiModels",[]);var apiModels=angular.module("apiModels");apiModels.factory("AuthorModel",["_","Resource","config",function(a,b,c){function d(a){return new Author(angular.fromJson(a))}function e(b){return a.map(angular.fromJson(b),function(a){return new Author(a)})}return b(c.apiUrl+"/authors/:id",{id:"@id"},{query:{transformResponse:e},get:{transformResponse:d}})}]);var apiModels=angular.module("apiModels");apiModels.factory("BookModel",["_","Resource","config",function(a,b,c){function d(a){return new Book(angular.fromJson(a))}function e(b){return a.map(angular.fromJson(b),function(a){return new Book(a)})}return b(c.apiUrl+"/books/:id",{id:"@id"},{query:{transformResponse:e},get:{transformResponse:d}})}]);var apiModels=angular.module("apiModels");apiModels.factory("CharacterModel",["_","Resource","config",function(a,b,c){function d(a){return new Character(angular.fromJson(a))}function e(b){return a.map(angular.fromJson(b),function(a){return new Character(a)})}return b(c.apiUrl+"/characters/:id",{id:"@id"},{query:{transformResponse:e},get:{transformResponse:d}})}]),apiModels.factory("BookCharacterModel",["_","Resource","config",function(a,b,c){function d(a){return new Character(angular.fromJson(a))}function e(b){return a.map(angular.fromJson(b),function(a){return new Character(a)})}return b(c.apiUrl+"/books/:bookID/characters/:charID",{bookID:"@bookID",charID:"@charID"},{query:{transformResponse:e},get:{transformResponse:d}})}]);var apiModels=angular.module("apiModels");apiModels.factory("ClientModel",["_","Resource","config",function(a,b,c){function d(a){return new Client(angular.fromJson(a))}return b(c.apiUrl+"/auth/:client_id",{client_id:"@client_id"},{connect:{method:"GET",url:c.apiUrl+"/auth/"+c.clientName+"/"+c.clientKey},disconnect:{url:c.apiUrl+"/auth/stop"},create:{transformResponse:d}})}]);var apiModels=angular.module("apiModels");apiModels.factory("EditionModel",["_","Resource","config",function(a,b,c){function d(a){return new Edition(angular.fromJson(a))}function e(b){return a.map(angular.fromJson(b),function(a){return new Edition(a)})}return b(c.apiUrl+"/editions/:id",{id:"@id"},{query:{transformResponse:e},get:{transformResponse:d}})}]);var apiModels=angular.module("apiModels");apiModels.factory("LibraryModel",["_","Resource","config",function(a,b,c){function d(a){return new Library(angular.fromJson(a))}return b(c.apiUrl+"/library/:id",{id:"@id"},{query:{transformResponse:d,isArray:!1},addBook:{url:c.apiUrl+"/library",method:"POST"},removeBook:{url:c.apiUrl+"/library/:id",method:"DELETE"}})}]);var apiModels=angular.module("apiModels");apiModels.factory("SearchModel",["_","Resource","config",function(a,b,c){function d(a){return new Search(angular.fromJson(a))}return b(c.apiUrl+"/search?q=:query",{query:"@query"},{query:{transformResponse:d,isArray:!1}})}]);var apiModels=angular.module("apiModels");apiModels.factory("SerieModel",["_","Resource","config",function(a,b,c){function d(a){return new Serie(angular.fromJson(a))}function e(b){return a.map(angular.fromJson(b),function(a){return new Serie(a)})}return b(c.apiUrl+"/series/:id",{id:"@id"},{query:{transformResponse:e},get:{transformResponse:d}})}]);var apiModels=angular.module("apiModels");apiModels.factory("UserModel",["_","Resource","config",function(a,b,c){function d(a){return new User(angular.fromJson(a))}return b(c.apiUrl+"/users/:id",{id:"@id"},{create:{method:"POST",transformResponse:d},login:{url:c.apiUrl+"/users/login"},logout:{url:c.apiUrl+"/users/logout"},validateEmail:{url:c.apiUrl+"/user/validate/:login/:key",method:"POST"}})}]);var needbookApp=angular.module("needbookApp");needbookApp.factory("AuthService",["_","$log","AUTH_EVENTS","BroadcastService","ClientModel","UserModel","Session",function(a,b,c,d,e,f,g){var h={};return h.clientConnection=function(){e.connect(function(a){d.sendSuccess(c.clientAuthSuccess,a)},function(a){d.sendFailure(c.clientAuthSuccess,a)})},h.currentUser=function(a,b){f.get({id:g.uid},function(b){a(b)},b)},h.login=function(a){f.login(a,function(a){g.saveState(a.user),g.create(a.user.id),d.sendSuccess(c.loginSuccess,a.user)},function(a){d.sendFailure(c.loginFailed,a)})},h.logout=function(){g.destroy()},h.register=function(b){f.create(b,function(e){d.sendSuccess(c.registrationSuccess,e),h.login(a.pick(b,"login","password"))},function(a){d.sendFailure(c.registrationFailed,a)})},h.deleteUser=function(a){f["delete"]({id:a},function(a){d.sendSuccess(c.deletionSuccess,a),h.logout()},function(a){d.sendFailure(c.deletionFailed,a)})},h.isAuthenticated=function(){return b.info("authService.isAuthenticated",!!g.userId),!!g.userId},h.isAuthorized=function(a){return angular.isArray(a)||(a=[a]),b.info("authService.isAuthorized",h.isAuthenticated()&&-1!==a.indexOf(g.userRole)),h.isAuthenticated()&&-1!==a.indexOf(g.userRole)},h}]),needbookApp.factory("AuthResolver",["$cookies","$q","Session",function(a,b,c){return{resolve:function(){var d=b.defer(),e=a.get("uid");return e?(c.create(e),d.resolve()):d.reject("Not logged in"),d.promise}}}]);var needbookApp=angular.module("needbookApp");needbookApp.factory("BroadcastService",["$log","$rootScope","config",function(a,b,c){var d={};return d.send=function(a,c){b.$broadcast(a,c)},d.sendSuccess=function(b,e){c.log&&a.info(b,e),d.send(b,e)},d.sendFailure=function(b,e){c.log&&a.warn(b,e),d.send(b,e)},d}]);var needbookApp=angular.module("needbookApp");needbookApp.service("Session",["$log","$cookies","BroadcastService","AUTH_EVENTS","USER_ROLES",function(a,b,c,d,e){this.loadState=function(){var b=localStorage.getItem("user");return a.debug("Session.loadState",null!==localStorage.getItem("user")?angular.fromJson(b):null),null!==localStorage.getItem("user")?angular.fromJson(b):null},this.saveState=function(b){localStorage.setItem("user",angular.toJson(b)),a.debug("Session.saveState",angular.toJson(b))},this.deleteState=function(){localStorage.removeItem("user")},this.create=function(a,f){this.uid=a,this.userRole=f||e.admin,b.put("uid",a),c.sendSuccess(d.sessionCreated,a)},this.destroy=function(){this.uid=null,this.userRole=null,this.deleteState(),b.remove("uid"),c.sendSuccess(d.sessionDeleted)}}]);var needbookApp=angular.module("needbookApp");needbookApp.service("ToolbarService",["$log","$rootScope",function(a,b){this.setPageTitle=function(a){b.pageTitle=a}}]);var needbookApp=angular.module("needbookApp");needbookApp.controller("AuthorCardCtrl",["$scope",function(a){a.ctrlName="AuthorCardCtrl"}]),needbookApp.directive("authorCard",function(){return{restrict:"E",scope:{author:"="},templateUrl:"shared/author/authorCard.tmpl.html",controller:"AuthorCardCtrl"}});var needbookApp=angular.module("needbookApp");needbookApp.controller("BookCardCtrl",["$scope",function(a){a.ctrlName="BookCardCtrl"}]),needbookApp.directive("bookCard",function(){return{restrict:"E",scope:{book:"="},templateUrl:"shared/book/bookCard.tmpl.html",controller:"BookCardCtrl",link:function(a,b,c){var d=c.hovering||"md-whiteframe-z2";b.bind("mouseenter",function(){b.find("md-card").addClass(d)}),b.bind("mouseleave",function(){b.find("md-card").removeClass(d)})}}});var needbookApp=angular.module("needbookApp");needbookApp.controller("EmptyContentCtrl",["$scope",function(a){a.ctrlName="EmptyContentCtrl"}]),needbookApp.directive("emptyContent",function(){return{restrict:"E",scope:{icon:"@",text:"@"},templateUrl:"shared/core/empty-content/emptyContent.tmpl.html",controller:"EmptyContentCtrl"}});var needbookApp=angular.module("needbookApp");needbookApp.controller("LoadingCircleCtrl",["$scope",function(a){a.ctrlName="LoadingCircleCtrl"}]),needbookApp.directive("loadingCircle",function(){return{restrict:"E",scope:{loading:"="},templateUrl:"shared/core/loading-circle/loadingCircle.tmpl.html",controller:"LoadingCircleCtrl"}});var needbookApp=angular.module("needbookApp");needbookApp.controller("SearchInputCtrl",["$scope","$state","$stateParams",function(a,b,c){a.ctrlName="SearchInputCtrl",a.query=c.query||"",a.search=function(c){c.length>1&&b.go("app.search",{query:a.query})}}]),needbookApp.directive("searchInput",function(){return{restrict:"E",templateUrl:"shared/core/search/searchInput.tmpl.html",controller:"SearchInputCtrl"}});var needbookApp=angular.module("needbookApp");needbookApp.controller("SidenavCtrl",["$scope","$timeout","$mdSidenav","$log",function(a,b,c,d){a.close=function(){c("left").close().then(function(){d.debug("close LEFT is done")})},a.menu=[{subheader:"",links:[{title:"My Library",state:"app.library.books",icon:"my_library_books"},{title:"Top Books",state:"app.top_books",icon:"star"},{title:"Discover",state:"app.discover",icon:"explore"}]},{subheader:"Community",links:[{title:"Forum",state:"app.forum",icon:"forum"}]},{subheader:"Management",links:[{title:"Settings",state:"app.settings",icon:"settings"},{title:"Send feedback",state:"app.feedback",icon:"message"}]}]}]);var needbookApp=angular.module("needbookApp");needbookApp.controller("SimpleToolbarCtrl",[function(){}]);var needbookApp=angular.module("needbookApp");needbookApp.controller("LibraryToolbarCtrl",["_","$scope","$state","ToolbarService",function(a,b,c,d){function e(){var d=1;return a.find(b.tabs,function(a,b){return c.is(a.state)?(d=b,!0):void 0}),d}d.setPageTitle("My Library"),b.tabs=[{title:"Books",state:"app.library.books"},{title:"Series",state:"app.library.series"},{title:"Authors",state:"app.library.authors"},{title:"Favorites",state:"app.library.favorites"}],b.selectedIndex=e()}]);var needbookApp=angular.module("needbookApp");needbookApp.controller("BookToolbarCtrl",["_","$log","$rootScope","$scope","$state","$stateParams",function(a,b,c,d,e,f){function g(){var b=1;return a.find(d.tabs,function(a,c){var d=a.state.split("(")[0];return e.is(d)?(b=c,!0):void 0}),b}var h="app.book",i='{ bookID: "'+f.bookID+'"}',j=h+".details("+i+")",k=h+".characters("+i+")",l=h+".places("+i+")";d.tabs=[{title:"Details",state:j},{title:"Characters",state:k},{title:"Places",state:l}],d.selectedIndex=g()}]),angular.module("authControllers",[]);var authControllers=angular.module("authControllers");authControllers.controller("LoginCtrl",["$log","$scope","AuthService",function(a,b,c){b.credentials={login:"",password:""},b.login=function(a){c.login(a)}}]);var authControllers=angular.module("authControllers");authControllers.controller("SignUpCtrl",["$scope","$mdToast","AUTH_EVENTS","AuthService",function(a,b,c,d){a.user={firstName:"",lastName:"",login:"",email:"",password:"",password_confirm:"",state:"validated"},a.signUp=function(a){d.register(a)},a.$on(c.registrationSuccess,function(){b.show(b.simple().position("bottom right").content("Registration Success"))}),a.$on(c.registrationFailed,function(){b.show(b.simple().position("bottom right").content("Registration Failure"))})}]),angular.module("authorControllers",[]);var authorControllers=angular.module("authorControllers");authorControllers.controller("AuthorListCtrl",["_","$scope","AuthorModel",function(a,b,c){var d=c;b.emptyMsg="No Authors found",b.isEmpty=!0,b.isLoading=!0,b.authors=d.query(function(c){b.isEmpty=a.isEmpty(c),b.isLoading=!1})}]);var authorControllers=angular.module("authorControllers");authorControllers.controller("AuthorDetailCtrl",["$scope","$stateParams","AuthorModel","ToolbarService",function(a,b,c,d){d.setPageTitle("Author");var e=c;a.books={},a.author=e.get({id:b.id},function(b){a.books=b.books,d.setPageTitle(b.names[0])})}]);var authorControllers=angular.module("authorControllers");authorControllers.controller("LibraryAuthorListCtrl",["_","$scope","AuthorModel",function(a,b,c){b.emptyMsg="No Authors found in your Library",b.isEmpty=!0,b.isLoading=!1,b.authors=[]}]),angular.module("bookControllers",[]);var bookControllers=angular.module("bookControllers");bookControllers.controller("BookListCtrl",["_","$rootScope","$scope","BookModel",function(a,b,c,d){var e=d;c.emptyMsg="No Books found",c.isEmpty=!0,c.isLoading=!0,c.books=e.query(function(b){c.isEmpty=a.isEmpty(b),c.isLoading=!1})}]);var bookControllers=angular.module("bookControllers");bookControllers.controller("BookDetailCtrl",["_","$scope","$stateParams","BookModel","LibraryModel","ToolbarService",function(a,b,c,d,e,f){function g(c){var d=!1;return a.each(b.currentUser.library.books,function(a){a.edition.id===c&&(d=!0)}),d}f.setPageTitle("Book");var h=d,i=e;b.edition={},b.author={},b.added=!1,b.book=h.get({id:c.bookID},function(a){b.edition=a.editions[0],b.author=a.authors[0],b.added=g(b.edition.id),f.setPageTitle(b.book.title)}),b.addToLibrary=function(a){i.addBook({id:a},function(a){console.log(a),b.added=!0})},b.removeFromLibrary=function(a){i.removeBook({id:a},function(a){console.log(a),b.added=!1})}}]);var bookControllers=angular.module("bookControllers");bookControllers.controller("LibraryBookListCtrl",["_","$scope","LibraryModel",function(a,b,c){var d=c;b.emptyMsg="No Books found in your Library",b.isEmpty=!0,b.isLoading=!0,b.books=d.query(function(c){b.books=a.map(c.books,function(b){var c=b.edition.book;return c.editions=[a.omit(b.edition,"book")],c}),b.isEmpty=a.isEmpty(c.books),b.isLoading=!1})}]);var bookControllers=angular.module("bookControllers");bookControllers.controller("FavoriteBooksCtrl",["$scope","BookModel",function(a,b){a.icon="favorite",a.emptyMsg="No favorite Books",a.books=[]}]);var bookControllers=angular.module("bookControllers");bookControllers.controller("BookCharacterListCtrl",["$rootScope","$scope","$stateParams","BookCharacterModel",function(a,b,c,d){var e=d;b.characters=e.query({bookID:c.bookID})}]);var bookControllers=angular.module("bookControllers");bookControllers.controller("BookCharacterDetailCtrl",["$rootScope","$scope","$stateParams","BookCharacterModel",function(a,b,c,d){var e=d;a.title="Character",b.character=e.get({bookID:c.id,charID:c.characterID},function(b){a.title=b.name})}]);var needbookApp=angular.module("needbookApp");needbookApp.controller("SearchCtrl",["_","$scope","$stateParams","$timeout","SearchModel","ToolbarService",function(a,b,c,d,e,f){f.setPageTitle("Search");var g=e;b.query=c.query,b.results={},b.isLoading=!0,b.isEmpty=!0;var h=function(b,c){return a.forEach(c,function(c){return a.has(b,c)?void 0:!1}),!0},i=function(b,c){var d=!0;return a.forEach(c,function(c){a.isEmpty(b[c])||(d=!1)}),d};d(function(){g.query({query:b.query},function(a){b.results=a,h(a,["author","book","serie","edition"])&&(b.isEmpty=i(a,["author","book","serie","edition"])),b.isLoading=!1})},500)}]),angular.module("serieControllers",[]);var serieControllers=angular.module("serieControllers");serieControllers.controller("SerieListCtrl",["$scope","SerieModel",function(a,b){a.emptyMsg="No Series found in your Library",a.isEmpty=!0,a.isLoading=!1,a.series=[]}]);var serieControllers=angular.module("serieControllers");serieControllers.controller("SerieDetailCtrl",["$scope","$stateParams","SerieModel","ToolbarService",function(a,b,c,d){d.setPageTitle("Serie");var e=c;a.serie=e.get({id:b.id},function(a){d.setPageTitle(a.name)})}]);var needbookApp=angular.module("needbookApp");needbookApp.controller("HomeCtrl",[function(){}]);var needbookApp=angular.module("needbookApp");needbookApp.controller("HomeToolbarCtrl",["$scope","$state",function(a,b){a.selectedIndex=b.is("home.login")?0:1}]);var needbookApp=angular.module("needbookApp");needbookApp.controller("TopBooksCtrl",["$scope","ToolbarService",function(a,b){b.setPageTitle("Top Books"),a.books=[],a.emptyMsg="No Top Books found"}]);var needbookApp=angular.module("needbookApp");needbookApp.controller("DiscoverCtrl",["_","$scope","BookModel","ToolbarService",function(a,b,c,d){d.setPageTitle("Discover");var e=c;b.emptyMsg="No Books found",b.isEmpty=!0,b.isLoading=!0,b.books=e.query(function(c){b.isEmpty=a.isEmpty(c),b.isLoading=!1})}]);var needbookApp=angular.module("needbookApp");needbookApp.controller("ForumCtrl",["$scope","ToolbarService",function(a,b){b.setPageTitle("Forum")}]);var needbookApp=angular.module("needbookApp");needbookApp.controller("SettingsCtrl",["$scope","$mdDialog","AuthService","ToolbarService",function(a,b,c,d){d.setPageTitle("Settings"),a.showConfirm=function(){var d=b.confirm().title("Would you like to delete your account?").content("This action will delete everything including your Library.").ariaLabel("Lucky day").ok("I agree").cancel("Cancel");b.show(d).then(function(){console.log("You decided to delete your account."),c.deleteUser(a.currentUser.id)},function(){console.log("You decided to keep your account.")})}}]);var needbookApp=angular.module("needbookApp");needbookApp.controller("FeedbackCtrl",["$scope","ToolbarService",function(a,b){b.setPageTitle("Send feedback")}]);